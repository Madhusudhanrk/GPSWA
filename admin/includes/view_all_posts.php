<?php//selected checkboxes postId come here and foreach transfer that id to checkboxarrayid.    $count=1;   if(isset($_POST['SelectPostsArray'])) {      foreach ($_POST['SelectPostsArray'] as $CheckboxArrayId) {         $mainoption = $_POST['MainOptions'];         //selected main option come what to do with selected checks.         switch ($mainoption) {           case 'publish':                $query="UPDATE post SET post_status='{$mainoption}' WHERE post_id={$CheckboxArrayId}";                $post_mainoption = mysqli_query($dbcon,$query);                if(!$post_mainoption){                   die("ERROR in MainOptions".mysqli_query($dbcon));                }elseif($count==1){                  echo "<h4 class='bg-success'>Record Published:</h4>";                   $count++;                }             break;           case 'draft':                $query="UPDATE post SET post_status='{$mainoption}' WHERE post_id={$CheckboxArrayId}";                $post_mainoption = mysqli_query($dbcon,$query);                if(!$post_mainoption){                   die("ERROR in MainOptions".mysqli_query($dbcon));                }elseif($count==1){                  echo "<h4 class='bg-success'>Record Now Draft:</h4>";                   $count++;                }             break;            case 'delete':               echo 'madhu';//douut               echo $count;                $query="DELETE FROM post WHERE post_id={$CheckboxArrayId}";                $post_mainoption = mysqli_query($dbcon,$query);                if(!$post_mainoption){                   die("ERROR in MainOptions".mysqli_query($dbcon));                }else if($count==1){                  echo "<h4 class='bg-success'>Record Deleted:</h4>";                   $count++;                }                header("Location:posts.php");             break;             case 'clone':  //CLONE CODE SELECT RECORD AND FETCH RECORD VALUES AND INSERT AGAIN THAT RECORD TO TABLE                         $query = "SELECT * FROM post WHERE post_id={$CheckboxArrayId}";                   $clone_query = mysqli_query($dbcon,$query);                  while($row = mysqli_fetch_assoc($clone_query)){                      $post_id = $row['post_id'];                      $post_user = $row['post_user'];                      $post_title = $row['post_title'];                      $post_category_id = $row['post_category_id'];                      $post_status = $row['post_status'];                      $post_image = $row['post_image'];                      $post_content = $row['post_content'];                      $post_tags = $row['post_tags'];                      $post_comment_count = $row['post_comment_count'];                      $post_date = $row['post_date'];                  }                  if(!$clone_query){                    die("clone query failed".mysqli_error($dbcon));                  } $query = "INSERT INTO post(post_category_id,post_title,post_user,post_date,post_image,post_content,post_tags,post_status)VALUES($post_category_id,'{$post_title}','{$post_user}',now(),'{$post_image}','{$post_content}','{$post_tags}','{$post_status}')";$add_post_query = mysqli_query($dbcon,$query);if(!$add_post_query){    die("failed".mysqli_error($dbcon));}elseif($count==1){  echo "<h4 class='bg-success'>Record Cloned:</h4>";   $count++;}//CLONE CODE END.             break;           default:               header("Location:posts.php");             break;         }      }   }?><form action="" method="post"><!-- MAIN OPTIONS   -->    <div class='col-xs-4' style="padding:0px;">      <select name="MainOptions" class='form-control'>         <option value="">Select options</option>         <option value="publish">Publish</option>         <option value="draft">Draft</option>         <option value="delete">Delete</option>         <option value="clone">Clone</option>      </select>    </div><!-- SUBMIT OPTIONS -->    <div class="col-xs-4">      <input type="submit" name="submit" value="Apply" class='btn btn-success'>      <a href="posts.php?source=add_post" class="btn btn-primary">Add Post</a>    </div><!--*/MAIN OPTIONS-----------------------------------------------------------------------------><table class="table table-bordered table-hover"> <thead>  <tr>    <th><input type="checkbox" id="CheckAllPosts" ></th>    <th>S.No</th>    <th>User</th>    <th>Title</th>    <th>Category</th>    <th>Status</th>    <th>Image</th>    <th>Tags</th>    <th>Comments</th>    <th>Date</th>    <th>Views</th>    <th>View Post</th>    <th>Edit</th>    <th>Delete</th>      </tr> </thead> <tbody> <?php     $count=0;   $userrole = $_SESSION['userrole'];   if($userrole == 'admin'){     $query = "SELECT post.post_id,post.post_user,post.post_title,post.post_category_id,post.post_status,post.post_image,post.post_tags,post.post_comment_count,post.post_date,post.post_views_count,categories.cat_id,categories.cat_title FROM post LEFT JOIN categories ON post_category_id = cat_id";     //checking post_category_id number is maching to cat_id number matches returns number either form right table to left passes 0.we are printing cat_title using cat_id. neither it pass 0.but it will always avail becase post_cat_id and cat_id are same.  }else{        $user_id = $_SESSION['userid'];      $query = "SELECT post.post_id,post.post_user,post.post_title,post.post_category_id,post.post_status,post.post_image,post.post_tags,post.post_comment_count,post.post_date,post.post_views_count,categories.cat_id,categories.cat_title FROM post LEFT JOIN categories ON post_category_id = cat_id WHERE post_user = $user_id";        // $query = "SELECT * FROM post WHERE post_user = $user_id";  }       $select_posts = mysqli_query($dbcon,$query);    while($row = mysqli_fetch_assoc($select_posts)){        $post_id = $row['post_id'];        $post_user_id = $row['post_user'];          $query = "SELECT * FROM users WHERE user_id=$post_user_id";          $user_query = mysqli_query($dbcon,$query);          $rows = mysqli_fetch_assoc($user_query);        $post_user = $rows['username'];        $post_title = $row['post_title'];        $post_category_id = $row['post_category_id'];        $post_status = $row['post_status'];        $post_image = $row['post_image'];        $post_tags = $row['post_tags'];        $post_comment_count = $row['post_comment_count'];        $post_date = $row['post_date'];        $post_views_count = $row['post_views_count'];        $cat_id = $row['cat_id'];        $cat_title = $row['cat_title'];        echo "<tr>"; ?><!--  CHECK BOXES BEFORE POST -->          <!-- 1.value attribute is passing values and name attribute act like associative array the key contain 1 value now it is array key so it hold multi values. -->          <td>              <input class="CheckMultiplePosts" type="checkbox" name="SelectPostsArray[]"               value="<?php echo $post_id;?>">          </td><!--  CHECK BOXES BEFORE POST -->          <?php               $count++;          echo "<td class='text-center'>$count</td>";          echo "<td>{$post_user}</td>";          echo "<td>{$post_title}</td>";          echo "<td>{$cat_title}</td>";          echo "<td>{$post_status}</td>";          echo "<td><img width='100px' src='../images/$post_image'></td>";          echo "<td>{$post_tags}</td>";         $query = "SELECT * FROM comments WHERE comment_post_id = $post_id";         //cheking comments comparing this post id to comment_post_id in db to find how mant rows.         $comment_count_query = mysqli_query($dbcon,$query);         $post_comment_count = mysqli_num_rows($comment_count_query);          echo "<td class='text-center' style='vertical-align:middle;'><a href='post_related_comments.php?cpost_id=$post_id'> {$post_comment_count}</a></td>";          echo "<td style='vertical-align:middle;'>{$post_date}</td>";          echo "<td class='text-center' style='vertical-align:middle;'><a href='posts.php?reset_count={$post_id}'>{$post_views_count}</a></td>";          echo "<td style='text-align:center;font-size:19px;vertical-align:middle;'><a href='../post.php?post_id={$post_id}'><p><i style='color:grey;' class='fas fa-eye'></i></p></a></td>";             echo "<td style='text-align:center;vertical-align:middle;'><a href='posts.php?source=edit_post&post_id={$post_id}&post_category_id=$post_category_id'><i class='fas fa-edit' style='text-align:center;font-size:19px;'></i></a></td>";           echo "<td style='text-align:center;vertical-align:middle;'><a href='posts.php?delete={$post_id}'><i class='fas fa-trash' style='font-size:19px;'></i></a></td>";                 echo "</tr>";    } ?> <!-- after clicking delete it open posts.php?delete parameter in url.1.click it will delete this but not shown until same page refresh.2.so header used. -->  <?php      if(isset($_GET['delete'])){        $delete_post_id = $_GET['delete'];        if(isset($_SESSION['userrole'])){           if($_SESSION['userrole']=='admin'){                              $query = "DELETE FROM post WHERE post_id = $delete_post_id";              $delete_post_query = mysqli_query($dbcon,$query);                header("Location:posts.php");           }          }       }     if(isset($_GET['reset_count'])){       $reset_count = $_GET['reset_count'];       $query = "UPDATE post SET post_views_count = 0 WHERE post_id ={$reset_count}";       $reset_count = mysqli_query($dbcon,$query);        header("Location:posts.php");     }    ?>  </tbody></table></form>        